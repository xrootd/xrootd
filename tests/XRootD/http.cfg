set name = http
set port = 7094

set pwd = $PWD
set src = $SOURCE_DIR

xrootd.trace all

all.export /readonly/ readonly

xrootd.seclib libXrdSec.so
xrd.protocol XrdHttp:$port libXrdHttp.so

http.desthttps false
http.selfhttps2http false

ofs.authlib libXrdMacaroons.so
http.header2cgi Authorization authz
http.exthandler xrdtpc libXrdHttpTPC.so
http.exthandler xrdmacaroons libXrdMacaroons.so
macaroons.secretkey $pwd/macaroons-secret

xrootd.mongstream http use flush 3s send json 127.0.0.1:8888

# Verify static headers are appropriately appended to responses
http.staticheader -verb=OPTIONS Access-Control-Allow-Origin *
http.staticheader -verb=GET Foo Bar
http.staticheader -verb=GET Foo Baz
http.staticheader Test 1

http.cors libXrdHttpCors.so
cors.origin https://webserver.bli.bla.blo

continue $src/common.cfg
