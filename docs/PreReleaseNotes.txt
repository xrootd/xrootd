======
XRootD
======

Prerelease Notes
================

+ **New Features**
   * Add new object to format and route error messages to multiple
     destinations.
   * Allow clients to easily load checksum objects via XrdCksLoader object.

+ **Major bug fixes**
   * Only use the callback dispatcher ending state to determine whether the
     channel should be excluded from the poll set to avoid referencing
     deleted memory should the callback delete its own channel.
   * Recognize object deletion in the error handling path.
   * Add missing return statement to avoid SEGV during write error recovery
     under certain circumstances. Fixes bug 99002.
   * Add mutex serialization so as not to use only fcntl() locking
     as a synchronization primitive across threads. It doesn't work
     in Linux.

+ **Minor bug fixes**
   * Reject checksums on anything that isn't a regular file.
   * Allow for null fields in the cgi string.
   * Remove non-atomic AtomicDTZ and AtomicISM macros.
   * Do not use AtomicDTZ and AtomicISM so as to keep LinkCount and
     LinkCountMax updates truly atomic. The mentioned atomic macros
     should be removed at the next release boundary as this will
     change a public user interface.
   * Properly recognize a loaded checksum as a native checksum.

+ **Miscellaneous**
   * Pretty up an error message. Required XrdOucERoute patch.

